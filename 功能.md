**项目功能定义文档：基于对话节点的结构化思维协作平台**

**项目概述**
本项目旨在构建一款以“对话”为核心原子单位，通过可视化图谱进行组织、管理与深化的新一代思维协作平台。该系统将彻底改变传统线性的对话与文档模式，允许用户将离散的思考与讨论，结构化为可生长、可互联的动态知识网络，从而显著提升复杂项目规划、创意发散与深度思考的效率与质量。

**一、 核心交互哲学：对话即结构**
系统的根本创新在于将每一次用户与AI的问答交互，定义并封装为一个独立的**对话节点**。每个节点完整记录一轮问答的全体内容。用户的核心操作行为从传统的线性聊天或独立创作，转变为在一个可视化的思维画布上，有目的地**生长**新的对话节点，并在节点间建立**逻辑连接**。这意味着，思维的过程被直接映射并固化为可操作、可演进的结构。

**二、 核心功能模块详述**

**1. 复杂思维网络的构建与管理**
本系统支持从简单到极度复杂的思维结构建模。
*   **多起点并行**：用户可以创建多个互不干扰的**根节点**，代表不同的项目、主题或思维线（例如：“产品年度规划”、“某学术课题研究”、“个人学习笔记”）。这些根节点在画布上并行存在，构成工作区的基础。
*   **树状发散生长**：从任一节点（无论是根节点还是子节点），用户均可创建**子节点**，开启一个更具针对性、更深入的新对话线程。此机制支持思维的无限制、结构化发散，自然形成树状分支。
*   **网状逻辑关联**：此为系统的关键差异化功能，支持超越树状结构的复杂关联。
    *   **多父节点归属**：允许一个子节点（例如：“市场风险评估”）同时归属于两个或多个父节点（例如：“产品方案A”与“产品方案B”）。在此子节点中进行对话时，系统将自动综合理解所有父节点的上下文，使讨论基于更全面的信息背景。
    *   **自定义关系连线**：用户可以在任意两个节点之间（无论是否存在父子关系）建立**关系连线**，并必须标注关系类型（如：“支持”、“矛盾”、“前提”、“细化”、“参考”等）。此连线不仅是视觉提示，更是赋予系统理解用户思维逻辑关系的重要元数据，直接影响后续对话中的上下文处理策略。

**2. 智能化的对话上下文管理**
系统提供严格而灵活的上下文控制机制，确保思维既专注又可综合。
*   **分支隔离原则**：默认情况下，在任一分支节点内进行的对话，其上下文严格限定于该分支的祖先节点历史。其他并行或无关分支的内容完全不可见，有效防止思维干扰与信息过载，保障讨论的纯粹性。
*   **按需联通与综合**：当节点通过“多父节点”或“关系连线”与其他节点关联后，其对话上下文将根据关系类型动态调整。例如，在一个标记为“参考”某技术文档的节点中对话，系统将优先融入被参考节点的关键信息；在“反对”某一观点的节点中，系统会明确意识到当前的辩论立场。
*   **结论提炼与结构整合**：系统支持用户将某个深入讨论的分支（可能包含数十个节点）的最终结论或核心观点，**提炼并合并**为一个新的**结论节点**。此节点可以被链接或移动到思维主线或其他相关分支上，实现从发散性探索到结构化成果的自然收敛。

**3. 强大的可视化画布与高阶操作**
画布不仅是查看界面，更是核心的操作与管理工作台。
*   **实时双向同步**：所有交互结果即时反馈：
    *   **内容驱动视图**：节点内的每一次对话更新，都会实时同步到画布节点预览。
    *   **视图驱动结构**：在画布上进行的任何节点拖拽、连接线绘制、关系编辑操作，都会直接保存并更新底层数据模型。视图与数据状态始终保持一致。
*   **高阶视图管理工具**：
    *   **节点聚合（复合节点）**：为解决思维发散导致的画布节点过多问题，用户可将一系列逻辑紧密相关的子节点（例如：关于某个功能点的“需求描述”、“设计思路”、“技术难点”三个节点）**聚合**为一个**复合节点**（例如：“XX功能模块”）。复合节点在画布上显示为单一整洁单元，双击可展开查看其内部完整的子节点网络。
    *   **全局搜索与快速定位**：提供强大的跨节点全文检索功能，用户可通过关键词快速定位到包含特定讨论内容的所有节点，并在画布上高亮显示，便于在大型项目中迅速找到所需信息。
*   **全流程操作追溯**：系统完整记录用户对画布结构（增删改节点、连接关系）和节点内容的所有操作历史。支持：
    *   **撤销/重做**：进行常见的步骤回退与恢复。
    *   **历史版本回溯**：允许用户回溯到项目历史上的任意一个操作时间点，查看当时的完整思维图谱与内容状态。此功能确保任何思路演进路径都被完整保存，永不丢失，且支持从历史快照创建新的分支，进行差异化探索。

**三、 总结**
本系统通过将“对话”结构化为可互联的节点，并赋予强大的可视化与逻辑管理能力，旨在为用户提供一个动态生长、逻辑清晰且永不忘却的“第二大脑”。它尤其适用于需要长期演进、多线并进、深度思考的复杂场景，如学术研究、产品设计、战略规划、创意写作等，是下一代知识工作与思维协作的基础工具。