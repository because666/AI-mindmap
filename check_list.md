# DeepMindMap V2 - 功能验收检查清单

## 一、核心功能验收

### 1. 思维网络构建

#### 1.1 多起点并行
- [ ] 用户可以创建多个根节点
- [ ] 根节点在画布上并行显示
- [ ] 不同根节点的数据相互隔离
- [ ] 根节点可以独立命名和描述
- [ ] 根节点可以设置不同的AI配置

#### 1.2 树状发散生长
- [ ] 从根节点可以创建子节点
- [ ] 从子节点可以继续创建子节点
- [ ] 子节点自动继承父节点上下文
- [ ] 节点层级关系正确显示
- [ ] 节点树结构可以展开/折叠

#### 1.3 多父节点归属
- [ ] 一个节点可以关联多个父节点
- [ ] 多父节点选择器正常工作
- [ ] 多父节点关系在画布上正确显示
- [ ] 对话时综合所有父节点上下文
- [ ] 多父节点权重可以调整

#### 1.4 自定义关系连线
- [ ] 可以在任意两节点间创建关系
- [ ] 关系类型选择器包含预设类型
- [ ] 可以自定义关系类型
- [ ] 关系连线在画布上正确显示
- [ ] 关系标签可以编辑

### 2. 对话上下文管理

#### 2.1 分支隔离原则
- [ ] 节点对话默认只包含祖先节点历史
- [ ] 其他分支内容不可见
- [ ] 隔离可以正确切换
- [ ] 隔离状态有明确提示

#### 2.2 按需联通与综合
- [ ] 关联节点后上下文自动调整
- [ ] "参考"关系正确融入被参考节点信息
- [ ] "反对"关系正确识别辩论立场
- [ ] 上下文配置可以手动调整
- [ ] 上下文预览功能正常

#### 2.3 结论提炼与结构整合
- [ ] 可以选择对话内容提炼结论
- [ ] 结论节点自动创建
- [ ] 结论节点可以链接到其他分支
- [ ] 结论节点可以移动位置
- [ ] 提炼内容可以编辑

### 3. 可视化画布操作

#### 3.1 实时双向同步
- [ ] 节点对话更新实时同步到画布预览
- [ ] 节点拖拽位置实时保存
- [ ] 连线操作实时保存
- [ ] 数据与视图始终保持一致
- [ ] 多设备同步正常（如有协作功能）

#### 3.2 节点聚合（复合节点）
- [ ] 可以多选节点进行聚合
- [ ] 复合节点在画布显示为单一单元
- [ ] 双击复合节点可展开内部网络
- [ ] 复合节点可以取消聚合
- [ ] 复合节点内部编辑正常

#### 3.3 全局搜索与快速定位
- [ ] 搜索框可以输入关键词
- [ ] 搜索结果包含节点和对话内容
- [ ] 搜索结果可以点击定位
- [ ] 定位后节点高亮显示
- [ ] 搜索支持模糊匹配

#### 3.4 操作追溯
- [ ] 撤销功能正常工作
- [ ] 重做功能正常工作
- [ ] 操作历史列表正确显示
- [ ] 可以回溯到历史时间点
- [ ] 历史快照可以创建
- [ ] 快照可以恢复

---

## 二、用户界面验收

### 1. 画布界面
- [ ] 画布可以无限滚动
- [ ] 画布缩放流畅（支持鼠标滚轮）
- [ ] 小地图正确显示整体布局
- [ ] 节点拖拽流畅无卡顿
- [ ] 节点连线操作直观
- [ ] 右键菜单功能完整
- [ ] 快捷键功能正常

### 2. 对话界面
- [ ] 对话面板布局合理
- [ ] 消息列表滚动流畅
- [ ] 用户消息和AI消息区分明显
- [ ] 流式响应显示自然
- [ ] Markdown渲染正确
- [ ] 代码块语法高亮
- [ ] 消息可以复制
- [ ] 输入框支持多行
- [ ] 发送快捷键正常

### 3. 侧边栏界面
- [ ] 节点树结构清晰
- [ ] 工作区列表显示正确
- [ ] 搜索栏位置合理
- [ ] 设置入口明显
- [ ] 侧边栏可以折叠

### 4. 弹窗与对话框
- [ ] 节点创建对话框功能完整
- [ ] 节点编辑对话框功能完整
- [ ] 关系编辑对话框功能完整
- [ ] 快照管理对话框功能完整
- [ ] 所有对话框可以关闭
- [ ] 表单验证正确

---

## 三、API接口验收

### 1. 节点相关接口
- [ ] POST /api/nodes - 创建节点
- [ ] GET /api/nodes/:nodeId - 获取节点详情
- [ ] PUT /api/nodes/:nodeId - 更新节点
- [ ] DELETE /api/nodes/:nodeId - 删除节点
- [ ] GET /api/workspaces/:workspaceId/nodes - 获取节点树

### 2. 对话相关接口
- [ ] POST /api/conversations/:conversationId/messages - 发送消息
- [ ] GET /api/conversations/:conversationId/messages - 获取历史
- [ ] POST /api/conversations/:conversationId/extract-conclusion - 提炼结论

### 3. 关系相关接口
- [ ] POST /api/relations - 创建关系
- [ ] GET /api/nodes/:nodeId/relations - 获取节点关系
- [ ] PUT /api/relations/:relationId - 更新关系
- [ ] DELETE /api/relations/:relationId - 删除关系

### 4. 搜索相关接口
- [ ] GET /api/search - 全局搜索

### 5. 历史相关接口
- [ ] GET /api/workspaces/:workspaceId/history - 获取历史
- [ ] POST /api/workspaces/:workspaceId/snapshots - 创建快照
- [ ] POST /api/snapshots/:snapshotId/restore - 恢复快照

---

## 四、性能验收

### 1. 响应时间
- [ ] 页面首屏加载 < 3秒
- [ ] 节点创建响应 < 500ms
- [ ] 对话首字响应 < 2秒
- [ ] 搜索响应 < 1秒
- [ ] 画布操作无延迟感

### 2. 大数据量测试
- [ ] 100个节点渲染正常
- [ ] 500个节点渲染正常
- [ ] 1000个节点渲染正常（可接受性能）
- [ ] 单节点100条消息滚动正常
- [ ] 单节点500条消息滚动正常

### 3. 内存占用
- [ ] 空闲状态内存 < 200MB
- [ ] 大数据量状态内存 < 500MB
- [ ] 无明显内存泄漏

---

## 五、兼容性验收

### 1. 浏览器兼容
- [ ] Chrome 最新版
- [ ] Firefox 最新版
- [ ] Safari 最新版
- [ ] Edge 最新版

### 2. 分辨率适配
- [ ] 1920x1080 显示正常
- [ ] 1366x768 显示正常
- [ ] 2560x1440 显示正常
- [ ] 4K分辨率显示正常

### 3. 移动端适配（可选）
- [ ] 平板横屏可用
- [ ] 平板竖屏可用
- [ ] 手机端基础可用

---

## 六、安全性验收

### 1. 认证与授权
- [ ] 未登录无法访问API
- [ ] Token过期自动跳转登录
- [ ] 不同工作区权限隔离
- [ ] 敏感操作需要确认

### 2. 数据安全
- [ ] API Key加密存储
- [ ] 密码加密存储
- [ ] HTTPS传输
- [ ] XSS防护
- [ ] CSRF防护

---

## 七、AI功能验收

### 1. 多模型支持
- [ ] OpenAI GPT-4 正常工作
- [ ] OpenAI GPT-3.5 正常工作
- [ ] Claude 3 正常工作
- [ ] 模型切换流畅

### 2. 上下文处理
- [ ] 简单上下文正确传递
- [ ] 多父节点上下文正确合并
- [ ] 关系上下文权重正确计算
- [ ] Token限制正确处理

### 3. 流式响应
- [ ] 流式输出正常
- [ ] 中断处理正确
- [ ] 错误处理正确

---

## 八、数据完整性验收

### 1. 数据持久化
- [ ] 节点数据正确保存
- [ ] 对话数据正确保存
- [ ] 关系数据正确保存
- [ ] 历史数据正确保存

### 2. 数据一致性
- [ ] 删除节点时关联数据正确处理
- [ ] 删除父节点时子节点正确处理
- [ ] 快照恢复数据完整

### 3. 数据导入导出
- [ ] JSON导出格式正确
- [ ] JSON导入验证正确
- [ ] Markdown导出格式正确

---

## 验收标准说明

| 状态 | 说明 |
|------|------|
| ✅ | 完全通过 |
| ⚠️ | 部分通过，需要修复 |
| ❌ | 未通过，需要重新开发 |
| N/A | 不适用 |

## 验收流程

1. **开发自测**：开发人员完成功能后自行测试
2. **功能测试**：测试人员按检查清单逐项测试
3. **用户验收**：邀请用户进行实际使用测试
4. **问题修复**：记录问题并修复
5. **回归测试**：修复后重新测试相关功能
6. **验收通过**：所有检查项通过后签字确认
